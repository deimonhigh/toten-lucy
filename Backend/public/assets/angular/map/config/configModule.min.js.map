{"version":3,"sources":["config/Dependencias/loadingInterceptor.js","config/Dependencias/interceptorsConfig.js","config/Dependencias/autenticacaoInterceptor.js","config/Dependencias/configValue.js","config/Dependencias/qSerial.js"],"names":["loadingInterceptor","$q","$rootScope","loadingCount","request","config","$broadcast","when","response","responseError","reject","module","factory","$inject","angular","localStorageService","base64Factory","$location","requisicao","storage","get","url","indexOf","autorizacaoDados","JSON","parse","decode","headers","access_token","e","$httpProvider","interceptors","push","constant","baseUrl","apiToken","apiUrl","baseUrlDev","apiTokenDev","apiUrlDev","grant_type","client_id","client_secret","client_secret_dev","scope","dev","$provide","decorator","$delegate","serial","tasks","prevPromise","error","Error","forEach","task","key","nextPromise","success","fail","notify","then","data","ret","isPromiseLike","message","reason","obj","isFunction","routeFn","$stateProvider","$urlRouterProvider","localStorageServiceProvider","cfpLoadingBarProvider","includeSpinner","setPrefix","setStorageType","otherwise","state","templateUrl","controller"],"mappings":"QAaAA,oBAAAC,EAAAC,GAEA,GAAAC,GAAA,CAEA,QAEAC,QAAA,SAAAC,GAIA,MAFA,MAAAF,GAAAD,EAAAI,WAAA,oBAEAD,GAAAJ,EAAAM,KAAAF,IAMAG,SAAA,SAAAA,GAIA,MAFA,MAAAL,GAAAD,EAAAI,WAAA,kBAEAE,GAAAP,EAAAM,KAAAC,IAMAC,cAAA,SAAAD,GAIA,MAFA,MAAAL,GAAAD,EAAAI,WAAA,kBAEAL,EAAAS,OAAAF,aAxCAG,OAAA,YAEAC,QAAA,qBAAAZ,uCAIAa,SAAA,KAAA,cCPAC,QACAH,OAAA,YACAC,QAAA,2BACA,sBAAA,SAAA,gBAAA,YAAA,SAAAG,EAAAV,EAAAW,EAAAC,GACA,OACAb,QAAA,SAAAc,GAEA,IACA,GAAAC,GAAAJ,EAAAK,IAAA,OAEA,IACA,MAAAD,GAAAD,EAAAG,IAAAC,QAAA,UAAA,EAEA,KAAA,SAGA,IAAAC,GAAAC,KAAAC,MAAAT,EAAAU,OAAAP,GAQA,OANAI,IACAL,EAAAG,IAAAC,QAAA,QAAA,IAAA,GAAAJ,EAAAG,IAAAC,QAAA,WACAJ,EAAAS,QAAA,cAAA,UAAAJ,EAAAK,cAIAV,ECzBA,MAAAW,GACA,IAAA,GAAAX,EAAAG,IAAAC,QAAA,eACA,MAAAJ,SASA,SAAAJ,GACAA,EACAH,OAAA,YACAN,QACA,gBACA,SAAAyB,GACAA,EAAAC,aAAAC,KAAA,2BACAF,EAAAC,aAAAC,KAAA,0BAGAlB,SAGAA,QACAH,OAAA,YACAsB,SAAA,UACAC,QAAA,6BACAC,SAAA,wCACAC,OAAA,iCACAC,WAAA,0BACAC,YAAA,qCACAC,UAAA,8BACAC,WAAA,WACAC,UAAA,EACAC,cAAA,2CACAC,kBAAA,2CACAC,MAAA,IACAC,KAAA,IAIA/B,QACAH,OAAA,YACAN,QACA,WACA,SAAAyC,GACAA,EAAAC,UAAA,MAEA,YACA,SAAAC,GAGA,QAAAC,GAAAC,GACA,GAAAC,GACAC,EAAA,GAAAC,MDLA,OCMAvC,SAAAwC,QAAAJ,EAAA,SAAAK,EAAAC,GACA,GAGAC,GAHAC,EAAAH,EAAAG,SAAAH,EACAI,EAAAJ,EAAAI,KACAC,EAAAL,EAAAK,MAGA,IAAAT,EAOAM,EAAAN,EAAAU,KD1CA,SAAAC,GACA,IAAAJ,EAAA,MAAAI,EACA,IAAAC,GAAAL,EAAAI,EACA,KAAAE,EAAAD,GAEA,KADAX,GAAAa,QAAA,QAAAT,EAAA,6BACAJ,CAEA,OAAAW,IAEA,SAAAG,GACA,IAAAP,EAAA,MAAAX,GAAAtC,OAAAwD,EACA,IAAAH,GAAAJ,EAAAO,EACA,KAAAF,EAAAD,GAEA,KADAX,GAAAa,QAAA,iBAAAT,EAAA,6BACAJ,CAEA,OAAAW,IAEAH,OCmBA,IADAH,EAAAC,KACAM,EAAAP,GAEA,KADAL,GAAAa,QAAA,QAAAT,EAAA,6BACAJ,CDnBAD,GAAAM,IAGAN,GAAAH,EAAAzC,OCCA,GAAAyD,GAAA,SAAAG,GAAA,MAAAA,IAAArD,QAAAsD,WAAAD,EAAAN,MDGA,OADAb,GAAAC,OAAAA,EACAD,QEpDA,WACA,YAMA,SAAAqB,GAAAC,EAAAC,EAAAC,EAAAC,GAEAA,EAAAC,gBAAA,EAEAF,EACAG,UAAA,YACAC,eAAA,kBAEAL,EAAAM,UAAA,KAEAP,EACAQ,MAAA,QACAzD,IAAA,OACA0D,YAAA,qBAGAD,MAAA,QACAzD,IAAA,QACA0D,YAAA,sBAGAD,MAAA,SACAzD,IAAA,IACA0D,YAAA,qBACAC,WAAA,oBCjCAF,MAAA,cACAzD,IAAA,cACA0D,YAAA,0BACAC,WAAA,wBAGAF,MAAA,YACAzD,IAAA,eACA0D,YAAA,wBACAC,WAAA,uBAGAF,MAAA,YACAzD,IAAA,YACA0D,YAAA,wBACAC,WAAA,uBAGAF,MAAA,YACAzD,IAAA,uBACA0D,YAAA,wBACAC,WAAA,uBAGAF,MAAA,WACAzD,IAAA,eACA0D,YAAA,uBACAC,WAAA,sBAGAF,MAAA,aACAzD,IAAA,aACA0D,YAAA,yBACAC,WAAA,wBAGAF,MAAA,eACAzD,IAAA,eACA0D,YAAA,2BACAC,WAAA,wBDlCAlE,QAAAH,OAAA,YAAAN,OAAAgE,GAEAA,EAAAxD,SAAA,iBAAA,qBAAA,8BAAA,0BCmCAC","file":"../../config/configModule.min.js","sourcesContent":["angular\r\n  .module(\"appToten\")\r\n  .factory(\"loadingInterceptor\", loadingInterceptor);\r\n\r\nloadingInterceptor.$inject = ['$q', '$rootScope'];\r\n\r\nfunction loadingInterceptor($q, $rootScope) {\r\n  var loadingCount = 0;\r\n  return {\r\n    request: function (config) {\r\n      if (++loadingCount === 1) $rootScope.$broadcast('loading:progress');\r\n      return config || $q.when(config);\r\n    },\r\n\r\n    response: function (response) {\r\n      if (--loadingCount === 0) $rootScope.$broadcast('loading:finish');\r\n      return response || $q.when(response);\r\n    },\r\n\r\n    responseError: function (response) {\r\n      if (--loadingCount === 0) $rootScope.$broadcast('loading:finish');\r\n      return $q.reject(response);\r\n    }\r\n  };\r\n};","\r\n//=require loadingInterceptor.js\r\n//=require autenticacaoInterceptor.js\r\n\r\n(function (angular) {\r\n  angular\r\n    .module(\"appToten\")\r\n    .config([\r\n              '$httpProvider',\r\n              function ($httpProvider) {\r\n                $httpProvider.interceptors.push(\"autenticacaoInterceptor\");\r\n                $httpProvider.interceptors.push(\"loadingInterceptor\");\r\n              }\r\n            ]);\r\n})(angular);\r\n\r\n","angular\r\n  .module(\"appToten\")\r\n  .factory(\"autenticacaoInterceptor\", [\r\n    'localStorageService', 'config', 'base64Factory', '$location', function (localStorageService, config, base64Factory, $location) {\r\n      return {\r\n        request: function (requisicao) {\r\n\r\n          try {\r\n            var storage = localStorageService.get('auth');\r\n\r\n            if (\r\n              storage == null || requisicao.url.indexOf('.html') > -1\r\n            ) {\r\n              throw \"Invalid\"\r\n            }\r\n\r\n            var autorizacaoDados = JSON.parse(base64Factory.decode(storage));\r\n\r\n            if (autorizacaoDados) {\r\n              if (requisicao.url.indexOf(\"api\") > -1 && requisicao.url.indexOf('oauth') == -1) {\r\n                requisicao.headers[\"Authorization\"] = \"Bearer \" + autorizacaoDados.access_token;\r\n              }\r\n            }\r\n\r\n            return requisicao;\r\n          }\r\n          catch (e) {\r\n            if (requisicao.url.indexOf(\"apigopharma\") == -1) {\r\n              return requisicao;\r\n            }\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n  ]);","angular\r\n  .module(\"appToten\")\r\n  .constant(\"config\", {\r\n    \"baseUrl\": \"https://lojadalucy.com.br/\",\r\n    \"apiToken\": \"https://lojadalucy.com.br/oauth/token\",\r\n    \"apiUrl\": \"https://lojadalucy.com.br/api/\",\r\n    \"baseUrlDev\": \"http://toten.localhost/\",\r\n    \"apiTokenDev\": \"http://toten.localhost/oauth/token\",\r\n    \"apiUrlDev\": \"http://toten.localhost/api/\",\r\n    \"grant_type\": \"password\",\r\n    \"client_id\": 3,\r\n    \"client_secret\": \"aw8AFIdfQ280GTnGjnJGHJGRc6lZpop1Pz3xhOj3\",\r\n    \"client_secret_dev\": \"N8bENBm0tCa2KToFezvaL2Ms8zNw2XNh00VU0fJG\",\r\n    \"scope\": \"*\",\r\n    \"dev\": false\r\n  });\r\n\r\n","angular\r\n  .module(\"appToten\")\r\n  .config([\r\n            \"$provide\",\r\n            function ($provide) {\r\n              $provide.decorator(\"$q\",\r\n                                 [\r\n                                   \"$delegate\",\r\n                                   function ($delegate) {\r\n                                     //Helper method copied from q.js.\r\n                                     var isPromiseLike = function (obj) { return obj && angular.isFunction(obj.then); }\r\n\r\n                                     /*\r\n                                      * @description Execute a collection of tasks serially.  A task is a function that returns a promise\r\n                                      *\r\n                                      * @param {Array.<Function>|Object.<Function>} tasks An array or hash of tasks.  A tasks is a function\r\n                                      *   that returns a promise.  You can also provide a collection of objects with a success tasks, failure task, and/or notify function\r\n                                      * @returns {Promise} Returns a single promise that will be resolved or rejected when the last task\r\n                                      *   has been resolved or rejected.\r\n                                      */\r\n                                     function serial(tasks) {\r\n                                       //Fake a \"previous task\" for our initial iteration\r\n                                       var prevPromise;\r\n                                       var error = new Error();\r\n                                       angular.forEach(tasks, function (task, key) {\r\n                                         var success = task.success || task;\r\n                                         var fail = task.fail;\r\n                                         var notify = task.notify;\r\n                                         var nextPromise;\r\n\r\n                                         //First task\r\n                                         if (!prevPromise) {\r\n                                           nextPromise = success();\r\n                                           if (!isPromiseLike(nextPromise)) {\r\n                                             error.message = \"Task \" + key + \" did not return a promise.\";\r\n                                             throw error;\r\n                                           }\r\n                                         } else {\r\n                                           //Wait until the previous promise has resolved or rejected to execute the next task\r\n                                           nextPromise = prevPromise.then(\r\n                                             /*success*/function (data) {\r\n                                               if (!success) { return data; }\r\n                                               var ret = success(data);\r\n                                               if (!isPromiseLike(ret)) {\r\n                                                 error.message = \"Task \" + key + \" did not return a promise.\";\r\n                                                 throw error;\r\n                                               }\r\n                                               return ret;\r\n                                             },\r\n                                             /*failure*/function (reason) {\r\n                                               if (!fail) { return $delegate.reject(reason); }\r\n                                               var ret = fail(reason);\r\n                                               if (!isPromiseLike(ret)) {\r\n                                                 error.message = \"Fail for task \" + key + \" did not return a promise.\";\r\n                                                 throw error;\r\n                                               }\r\n                                               return ret;\r\n                                             },\r\n                                             notify);\r\n                                         }\r\n                                         prevPromise = nextPromise;\r\n                                       });\r\n\r\n                                       return prevPromise || $delegate.when();\r\n                                     }\r\n\r\n                                     $delegate.serial = serial;\r\n                                     return $delegate;\r\n                                   }\r\n                                 ]);\r\n            }\r\n          ]);"]}