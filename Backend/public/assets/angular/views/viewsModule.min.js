!function(o){"use strict";function e(o,e,t){var a=e;o.login=function(o){t.token(o).then(function(e){if(e.error)return void alert("Usuário ou senha inválidos.");e.email=o.user,t.setStorage("auth",e),a.loadConfig(o.user,!0)},function(){alert("Usuário ou senha inválidos.")})}}o.module("appToten").controller("loginController",e),e.$inject=["$scope","$rootScope","apiService"]}(angular),function(o){"use strict";function e(e,t,a,r){var n=e,i=t;n.totalProdutosFrete=0,n.totalProdutos=0,n.cep="",n.result={show:!1},n.listaCompras=a.getStorage("carrinho")||[];var c=function(){n.totalProdutos=n.listaCompras.reduce(function(o,e){return o+e.preco*e.qnt},0),n.result.show?n.totalProdutosFrete=o.copy(n.totalProdutos)+parseFloat(n.result.valor):n.totalProdutosFrete=o.copy(n.totalProdutos)};n.removerItem=function(o){n.listaCompras=n.listaCompras.filter(function(e){return e.codigobarras!==o.codigobarras}),a.setStorage("carrinho",n.listaCompras),c()},n.calcTotalItem=function(o){0===o.qnt&&n.removerItem(o),c()},n.minus=function(o){o.qnt-1<0?o.qnt=0:o.qnt-=1,0===o.qnt?r(function(){n.removerItem(o)}):d(o,o.qnt),c()},n.more=function(o){o.qnt+=1,d(o,o.qnt),c()};var d=function(o,e){n.listaCompras.filter(function(e){return e.codigobarras===o.codigobarras}).length>0?(n.carrinho=n.listaCompras.map(function(t){return t.codigobarras===o.codigobarras&&(t.qnt=e),t}),a.setStorage("carrinho",n.listaCompras)):(o.qnt=e,n.listaCompras.push(o),a.setStorage("carrinho",n.listaCompras))};n.limparCarrinho=function(){a.delStorage("carrinho"),i.itensCarrinho=0,n.listaCompras=[],c()},n.calcularFrete=function(){a.cep(n.cep).then(function(o){n.result.local=o.uf+" - "+o.localidade;var e={cep:parseInt(n.cep),peso:n.listaCompras.reduce(function(o,e){return o+parseFloat(e.peso)},0)};s(e)},function(){alert("CEP não encontrado em nossa base.")})};var s=function(e){a.post("frete",e).then(function(e){n.result.valor=e.result.valor,n.result.prazo=e.result.prazo,n.result.show=!0,n.totalProdutosFrete=o.copy(n.totalProdutos)+parseFloat(e.result.valor)},function(){alert("CEP não encontrado em nossa base.")})};c()}o.module("appToten").controller("carrinhoController",e),e.$inject=["$scope","$rootScope","apiService","$timeout"]}(angular),function(o){"use strict";function e(e,t,a,r){var n=e,i=t;n.hideButtonComprovante=!1;var c=null;n.bandeiras=[{id:"aVista",descricao:"À vista"},{id:"Visa",descricao:"Visa"},{id:"Mastercard",descricao:"Mastercard"},{id:"Hipercard",descricao:"Hipercard"},{id:"American Express",descricao:"American Express"},{id:"Diners",descricao:"Diners"},{id:"Elo",descricao:"Elo"}];var d={bandeira:null,codigo:null};n.comprovantes=[o.copy(d)],n.removeItem=function(o){n.comprovantes=n.comprovantes.filter(function(e){return e.$$hashKey!=o.$$hashKey}),n.hideButtonComprovante=n.comprovantes.length>4},n.addComprovante=function(){n.comprovantes.length<5&&n.comprovantes.push(o.copy(d)),n.hideButtonComprovante=n.comprovantes.length>4},n.closeModal=function(){a.setStorage("comprovanteCodigos",n.comprovantes),a.post("pedidos/checarComprovantes",n.comprovantes).then(function(e){i.foto=!1,n.confirmFoto=!1,i.$broadcast("confirmarImg"),n.comprovantes=[o.copy(d)]},function(o){o.error.bandeira="aVista"==o.error.bandeira?"Á vista":o.error.bandeira,alert("O comprovante da bandeira '"+o.error.bandeira+"' e código '"+o.error.codigo+"' já existe em nossa base.")})},n.okFoto=function(){n.confirmFoto=!0},n.notOkFoto=function(){n.confirmFoto=!1},n.patOpts={x:0,y:0,w:600,h:540},n.channel={},n.onError=function(o){console.log(o)},n.onSuccess=function(){c=n.channel.video,n.$apply(function(){n.patOpts.w=c.width,n.patOpts.h=c.height})},n.makeSnapshot=function(){if(c){var o=document.querySelector("#snapshot");if(!o)return;var e=o.getContext("2d"),t=s(n.patOpts.x,n.patOpts.y,n.patOpts.w,n.patOpts.h);e.putImageData(t,0,0),n.confirmFoto=!0,n.imgResponse=o.toDataURL(),a.setStorage("comprovante",n.imgResponse)}};var s=function(o,e,t,a){var r=document.createElement("canvas");r.width=c.width,r.height=c.height;var n=r.getContext("2d");return n.drawImage(c,0,0,c.width,c.height),n.getImageData(o,e,t,a)}}o.module("appToten").controller("fotoController",e),e.$inject=["$scope","$rootScope","apiService","$timeout"]}(angular),function(o){"use strict";function e(e,t,a,r,n,i){var c=e,d=t,s={id:null,documento:null,nome:null,telefone:null,celular:null,enderecos:[]};c.dados={},c.dados.enderecoCerto=!0,c.dados.sexo="M",c.dados.outro={},c.estados=cidadesEstados.estados.map(function(o){return{sigla:o.sigla,nome:o.nome}}),c.$watch(function(o){return o.dados.uf},function(o){o&&c.procuraCidades(o)}),c.procuraCidades=function(o){c.cidades=cidadesEstados.estados.filter(function(e){return e.sigla===o.sigla})[0].cidades.map(function(o){return{nome:o,cidade:r.latinize(o.toUpperCase())}}),d.$broadcast("cidadeLoaded")},c.$watch(function(o){return o.dados.outro.uf},function(o){o&&c.procuraCidadesOutro(o)}),c.procuraCidadesOutro=function(o){c.cidadesOutro=cidadesEstados.estados.filter(function(e){return e.sigla===o.sigla})[0].cidades.map(function(o){return{nome:o,cidade:r.latinize(o.toUpperCase())}}),d.$broadcast("cidadeLoadedOutro")},c.$on("cidadeLoaded",function(){if(c.dados.cidadeTemp){var o=n("filter")(c.cidades,{cidade:r.latinize(c.dados.cidadeTemp).toUpperCase()},!0);c.dados.cidade=o&&o[0]?o[0]:{},delete c.dados.cidadeTemp}}),c.$on("cidadeLoadedOutro",function(){if(c.dados.outro.cidadeTempOutro){var o=n("filter")(c.cidadesOutro,{cidade:r.latinize(c.dados.outro.cidadeTempOutro).toUpperCase()},!0);c.dados.outro.cidade=o&&o[0]?o[0]:{},delete c.dados.outro.cidadeTempOutro}}),c.procurarCliente=function(o){!o||o.length<11||a.search("clientes",o).then(function(o){c.dados.documento=o.result.documento,c.dados.nome=o.result.nome,c.dados.telefone=o.result.telefone,c.dados.celular=o.result.celular,c.dados.id=o.result.id,c.dados.sexo=o.result.sexo,c.dados.email=o.result.email,1==o.result.enderecos.length?(c.dados.enderecoCerto=!0,c.dados.cep=o.result.enderecos[0].cep,c.dados.numero=o.result.enderecos[0].numero,c.dados.endereco=o.result.enderecos[0].endereco,c.dados.bairro=o.result.enderecos[0].bairro,c.dados.uf=n("filter")(c.estados,{sigla:o.result.enderecos[0].uf.toUpperCase()},!0)[0],c.dados.cidadeTemp=o.result.enderecos[0].cidade):(c.dados.enderecoCerto=!1,o.result.enderecos.map(function(o){1==o.enderecooriginal?(c.dados.outro.cep=o.cep,c.dados.outro.numero=o.numero,c.dados.outro.endereco=o.endereco,c.dados.outro.bairro=o.bairro,c.dados.outro.uf=n("filter")(c.estados,{sigla:o.uf.toUpperCase()},!0)[0],c.dados.outro.cidadeTempOutro=o.cidade):(c.dados.cep=o.cep,c.dados.numero=o.numero,c.dados.endereco=o.endereco,c.dados.bairro=o.bairro,c.dados.uf=n("filter")(c.estados,{sigla:o.uf.toUpperCase()},!0)[0],c.dados.cidadeTemp=o.cidade)}))},function(o){})},c.salvarDados=function(){var e=o.copy(c.dados);s.enderecos=[],s.id=e.id,s.documento=e.documento,s.nome=e.nome,s.telefone=e.telefone,s.celular=e.celular,s.email=e.email,s.sexo=e.sexo;var t={cep:e.cep,endereco:e.endereco,numero:e.numero,bairro:e.bairro,uf:e.uf.sigla,cidade:e.cidade.nome,enderecoOriginal:e.enderecoCerto};if(s.enderecos.push(t),!e.enderecoCerto){var r={cep:e.outro.cep,endereco:e.outro.endereco,numero:e.outro.numero,bairro:e.outro.bairro,uf:e.outro.uf.sigla,cidade:e.outro.cidade.nome,enderecoOriginal:!e.enderecoCerto};s.enderecos.push(r)}s.peso=a.getStorage("carrinho").reduce(function(o,e){return o+parseFloat(e.peso)},0),a.post("clientes/save",s).then(function(o){a.setStorage("cliente",o.result),d.temaStorage.mercado_pago?i.go("pagamentoMP"):i.go("pagamento")},function(o){alert("Ocorreu um erro ao salvar os dados do Cliente.")})};var l=function(){c.dados.endereco="",c.dados.bairro="",c.dados.uf="",delete c.dados.cidadeTemp},u=function(){c.dados.outro.endereco="",c.dados.outro.bairro="",c.dados.outro.uf="",delete c.dados.outro.cidadeTempOutro};c.procuraCep=function(o){a.cep(o).then(function(o){l(),c.dados.endereco=o.logradouro,c.dados.bairro=o.bairro,c.dados.uf=n("filter")(c.estados,{sigla:o.uf},!0)[0],c.dados.cidadeTemp=o.localidade})},c.procuraOutroCep=function(o){a.cep(o).then(function(o){u(),c.dados.outro.endereco=o.logradouro,c.dados.outro.bairro=o.bairro,c.dados.outro.uf=n("filter")(c.estados,{sigla:o.uf},!0)[0],c.dados.outro.cidadeTempOutro=o.localidade})}}o.module("appToten").controller("cadastroController",e),e.$inject=["$scope","$rootScope","apiService","latinizeService","$filter","$state"]}(angular),function(o){"use strict";function e(o,e,t,a,r,n){var i=o,c=e;if(!a.categoria)return void r.go("categorias");i.maxParcelas=c.temaStorage["parcela"+c.temaStorage.max_parcelas],i.menuActive=a.categoria,i.loading=!1,i.categorias=t.getStorage("categorias"),i.produtoActive=n("filter")(i.categorias,{id:parseInt(i.menuActive)},!0)[0].descricao,i.produtos=[];var d=i.categorias.filter(function(o){return o.id==a.categoria})[0];if(d.categorias){var s=d.categorias.map(function(o){return o.codigocategoria}),l={itens:s};t.post("produtos/filtro",l).then(function(o){i.loading=!0,i.produtos=o.result.filter(function(o){return o["preco"+c.temaStorage.listaPreco]>0}).map(function(o){return o.preco=o["preco"+c.temaStorage.listaPreco],o.precopromocao=o["precopromocao"+c.temaStorage.listaPreco],0==parseFloat(o.precopromocao)?o.comJuros=(parseFloat(o.preco)+parseFloat(o.preco)*parseFloat(i.maxParcelas)/100).toFixed(2)/parseInt(c.temaStorage.max_parcelas):o.comJuros=(parseFloat(o.precopromocao)+parseFloat(o.precopromocao)*parseFloat(i.maxParcelas)/100).toFixed(2)/parseInt(c.temaStorage.max_parcelas),o})})}}o.module("appToten").controller("produtosController",e),e.$inject=["$scope","$rootScope","apiService","$stateParams","$state","$filter"]}(angular),function(o){"use strict";function e(o,e,t,a,r,n){var i=o,c=e;i.qnt=1,i.produtosRelacionados=[],i.carrinho=t.getStorage("carrinho")||[],i.produto={},i.maxParcelas=c.temaStorage["parcela"+c.temaStorage.max_parcelas],t.get("produtos/"+r.id).then(function(o){i.produto=o.result,i.produto.preco=i.produto["preco"+c.temaStorage.listaPreco],i.produto.precopromocao=i.produto["precopromocao"+c.temaStorage.listaPreco],i.imagemGrande=i.produto.imagens[0],0==parseFloat(i.produto.precopromocao)?(i.produto.comJuros=(parseFloat(i.produto.preco)+parseFloat(i.produto.preco)*parseFloat(i.maxParcelas)/100).toFixed(2)/parseInt(c.temaStorage.max_parcelas),i.produto.semJuros=(parseFloat(i.produto.preco)+parseFloat(i.produto.preco)*parseFloat(c.temaStorage.parcela0)/100).toFixed(2)):(i.produto.comJuros=(parseFloat(i.produto.precopromocao)+parseFloat(i.produto.precopromocao)*parseFloat(i.maxParcelas)/100).toFixed(2)/parseInt(c.temaStorage.max_parcelas),i.produto.semJuros=(parseFloat(i.produto.precopromocao)+parseFloat(i.produto.precopromocao)*parseFloat(c.temaStorage.parcela0)/100).toFixed(2)),t.post("produtos/relacionados",{produtocodigo:i.produto.codigoproduto}).then(function(o){i.produtosRelacionados=o.result},function(o){alert(o.error)})},function(o){alert(o.error)}),i.minus=function(){i.qnt-1<0?i.qnt=0:i.qnt-=1,0==i.qnt&&i.removerItem(item)},i.more=function(){i.qnt+=1},i.selectColor=function(o){i.cores.map(function(o){o.selected=!1}),o.selected=!0},i.changeImg=function(o){i.imagemGrande=o},i.addCarrinho=function(o){i.carrinho.filter(function(e){return e.codigobarras==o.codigobarras}).length>0?(i.carrinho=i.carrinho.map(function(o){return o.codigobarras&&(o.qnt=i.qnt),o}),n(function(){c.itensCarrinho=i.carrinho.length}),t.setStorage("carrinho",i.carrinho)):(o.qnt=i.qnt,i.carrinho.push(o),t.setStorage("carrinho",i.carrinho)),a.go("carrinho")}}o.module("appToten").controller("produtoController",e),e.$inject=["$scope","$rootScope","apiService","$state","$stateParams","$timeout"]}(angular),function(o){"use strict";function e(o,e,t,a,r){var n=o,i=e;n.dadosVendedor={},n.formaPagamento="",n.editarPagamentoFlag=!1,n.cliente=t.getStorage("cliente"),n.formaPagamentoStorage=t.getStorage("formaPagamento"),n.comprovante=t.getStorage("comprovante"),n.frete=t.getStorage("frete");var c=t.getStorage("boleto");n.hideComprovante=!0,n.showBoleto={show:!1,boleto:""},n.totalCarrinho=0,n.totalCarrinhoFrete=0,r(function(){i.itensCarrinho=0}),t.delStorage("cliente"),t.delStorage("carrinho"),c.boleto&&(n.showBoleto.show=!0,n.showBoleto.boleto=c.boleto),c.mp&&(n.hideComprovante=!1);n.listaCompras=t.getStorage("carrinho")||[];n.totalCarrinho=function(){return n.listaCompras.reduce(function(o,e){return o+e.preco*e.qnt},0)+parseFloat(n.cliente.freteValor.valor)}();n.idPedido="TESTE."+function(o,e,t){return Array(e-String(o).length+1).join(t||"0")+o}(n.cliente.idPedido,13).replace(/^(\d{4})(\d{4})(\d+)(\d{2})/,"$1.$2.$3-$4"),n.limparSessao=function(){t.delStorage("comprovante"),t.delStorage("cliente"),t.delStorage("carrinho"),t.delStorage("formaPagamento"),t.delStorage("comprovanteCodigos"),t.delStorage("vendedor"),t.delStorage("frete"),t.delStorage("boleto"),r(function(){i.itensCarrinho=0})}}o.module("appToten").controller("finalizacaoController",e),e.$inject=["$scope","$rootScope","apiService","$state","$timeout"]}(angular),function(o){"use strict";function e(e,t,a,r,n){var i=e,c=t;i.dadosVendedor={},i.formaPagamento="",i.editarPagamentoFlag=!1,i.cliente=a.getStorage("cliente"),i.formaPagamentoStorage=a.getStorage("formaPagamento"),i.comprovante=a.getStorage("comprovante"),i.frete=a.getStorage("frete"),i.totalCarrinho=0,i.totalCarrinhoFrete=0;i.listaCompras=a.getStorage("carrinho")||[];var d=function(){return i.listaCompras.reduce(function(o,e){return o+e.preco*e.qnt},0)};i.totalCarrinho=d();i.idPedido="TESTE."+function(o,e,t){return Array(e-String(o).length+1).join(t||"0")+o}(i.cliente.idPedido,13).replace(/^(\d{4})(\d{4})(\d+)(\d{2})/,"$1.$2.$3-$4"),i.validarVendedor=function(){var o={};a.delStorage("comprovante"),o.identificacao=i.dadosVendedor.identificacao,o.senha=i.dadosVendedor.senha,a.post("vendedores/validate",o).then(function(o){a.setStorage("vendedor",o.result),c.openFoto()},function(o){alert(o.error)})},i.editarPagamento=function(){i.editarPagamentoFlag=!i.editarPagamentoFlag,a.setStorage("formaPagamento",i.formaPagamento),i.editarPagamentoFlag&&i.formaPagamento.total&&n(function(){var e=0;i.frete&&(e=parseFloat(i.cliente.freteValor.valor)),i.totalCarrinhoFrete=o.copy(i.totalCarrinho)+e})};var s=function(o){a.post("frete",o).then(function(e){a.setStorage("frete",e.result),i.frete=e.result,i.totalCarrinhoFrete=o.total+parseFloat(e.result.valor)})};i.$on("confirmarImg",function(){var o=a.getStorage("formaPagamento");i.comprovante=a.getStorage("comprovante");var e=a.getStorage("comprovanteCodigos"),t=a.getStorage("auth");i.cliente=a.getStorage("cliente");var n=a.getStorage("vendedor"),c={};c.idcliente=i.cliente.id,c.email=t.email,c.frete=i.frete.valor,c.prazo=i.frete.prazo,c.total=i.formaPagamentoStorage.total,c.totalSemJuros=i.listaCompras.reduce(function(o,e){return o+e.preco*e.qnt},0),c.idPedido=i.cliente.idPedido,c.img=i.comprovante,c.produtos=i.listaCompras.map(function(o){return{produto_id:o.id,codigoproduto:o.codigoproduto,qnt:o.qnt,preco:o.preco}}),e&&(c.comprovantes=e.map(function(o){return{bandeira:o.bandeira.id,codigo:o.codigo,vendedor_id:n.id}})),c.parcelas=o.parcelas,c.aVista=o.aVista,a.post("pedidos/save",c).then(function(o){alert("Pedido finalizado com sucesso!"),a.setStorage("boleto",o.result),r.go("finalizacao")},function(o){1===o.code?alert(o.error):alert("Pedido não concluída, por favor tente novamente!"),r.go("pagamento")})});var l=i.totalCarrinho+i.totalCarrinho*(parseFloat(c.temaStorage.parcela0)/100)+parseFloat(i.cliente.freteValor.valor);i.listaPagamentos=[{index:0,parcelas:0,aVista:!0,descricao:"À vista | R$ "+l.toFixed(2).replace(".",","),total:l}];for(var u=c.temaStorage.max_parcelas,p=1;p<=u;p++){var m=i.totalCarrinho+i.totalCarrinho*(parseFloat(c.temaStorage["parcela"+p])/100)+parseFloat(i.cliente.freteValor.valor),g={index:p+1,parcelas:p,aVista:!1,descricao:"Cartão de crédito | "+p+"x de R$ "+(m/p).toFixed(2).replace(".",","),total:m};0==c.temaStorage["parcela"+p]&&(g.descricao+=" s/ juros"),i.listaPagamentos.push(g)}!function(o){var e={cep:o,peso:i.listaCompras.reduce(function(o,e){return o+parseFloat(e.peso)},0),total:d()};s(e)}(i.cliente.cep)}o.module("appToten").controller("pagamentoController",e),e.$inject=["$scope","$rootScope","apiService","$state","$timeout"]}(angular),function(o){"use strict";function e(e,t,a,r,n,i,c){var d=e,s=t;d.dadosVendedor={},d.formaPagamento="",d.editarPagamentoFlag=!1,d.cliente=a.getStorage("cliente"),d.comprovante=a.getStorage("comprovante"),d.frete=a.getStorage("frete"),d.dados={type:"CPF",cpf:d.cliente.documento},d.okCartaoCredito=!1,d.infoNeeded=!0,d.tipoPagamento=a.getStorage("tiposPagamentoMP")||[],d.totalCarrinho=0,d.totalCarrinhoFrete=0,d.listaCompras=a.getStorage("carrinho")||[],0===d.tipoPagamento.length&&i.getPaymentsMethods().then(function(o){console.log(o),a.setStorage("tiposPagamentoMP",o.response),d.tipoPagamento=o.response}),d.mesValidade=Array.apply(null,Array(12)).map(function(o,e){return{name:e+1,id:e+1}}),d.dados.mes=1;var l=(new Date).getFullYear();d.anoValidade=Array.apply(null,Array(12)).map(function(o,e){return{name:l+e,id:l+e}}),d.dados.ano=l,d.validaCartao=function(o){o&&o.toString().length>=6&&i.getBin(o.toString()).then(function(o){d.okCartaoCredito=200!==o.status&&201!==o.status,200!==o.status&&201!==o.status&&alert("Parece que seu cartão não é válido."),d.tipoPagamento.map(function(e){200!==o.status&&201!==o.status?e.active=!1:(d.dados.typeId=o.response[0].id,e.active=e.id===o.response[0].id)})})},d.salvarPagamento=function(){var o=a.getStorage("formaPagamento"),e=(a.getStorage("comprovante"),a.getStorage("auth")),t=a.getStorage("cliente"),n=(a.getStorage("vendedor"),a.getStorage("formaPagamento"));c.start(),i.getIdTypes().then(function(s){d.dados.type=s.response[0].id,i.mPago().clearSession();var l=document.getElementById("formaPagamento");i.createToken(l).then(function(i){if(c.complete(),200!==i.status&&201!==i.status)return void alert("Algumas informações do seu cartão não estão corretas, por favor verifique.");var s={};s.token=i.response.id,s.method=d.dados.typeId,s.idcliente=t.id,s.email=e.email,s.frete=d.frete.valor,s.prazo=d.frete.prazo,s.total=n.total,s.totalSemJuros=d.listaCompras.reduce(function(o,e){return o+e.preco*e.qnt},0),s.idPedido=t.idPedido,s.produtos=d.listaCompras.map(function(o){return{produto_id:o.id,codigoproduto:o.codigoproduto,qnt:o.qnt,preco:o.preco}}),s.parcelas=o.parcelas,s.aVista=o.aVista,a.post("pedidos/saveMp",s).then(function(o){o.result.boleto?alert("Pedido esperando finalização!"):alert("Pedido finalizado com sucesso!"),a.setStorage("boleto",o.result),r.go("finalizacao")},function(o){1==o.code?alert(o.error.msg):alert("Pedido não concluída, por favor tente novamente!"),r.go("pagamentoMP")})})})};var u=function(){return d.listaCompras.reduce(function(o,e){return o+e.preco*e.qnt},0)};d.totalCarrinho=u(),d.editarPagamento=function(){d.editarPagamentoFlag=!d.editarPagamentoFlag,a.setStorage("formaPagamento",d.formaPagamento),d.editarPagamentoFlag&&d.formaPagamento.total&&n(function(){var e=0;d.frete&&(e=parseFloat(d.cliente.freteValor.valor)),d.totalCarrinhoFrete=o.copy(d.totalCarrinho)+e}),d.formaPagamento.boleto||!d.formaPagamento.boleto&&d.formaPagamento.aVista?n(function(){d.infoNeeded=!1,d.dados.typeId="bolbradesco",d.tipoPagamento.map(function(o){o.active="bolbradesco"===o.id})}):d.infoNeeded=!0};d.idPedido="TESTE."+function(o,e,t){return Array(e-String(o).length+1).join(t||"0")+o}(d.cliente.idPedido,13).replace(/^(\d{4})(\d{4})(\d+)(\d{2})/,"$1.$2.$3-$4");var p=function(o){a.post("frete",o).then(function(e){a.setStorage("frete",e.result),d.frete=e.result,d.totalCarrinhoFrete=o.total+parseFloat(e.result.valor)})},m=d.totalCarrinho+d.totalCarrinho*(parseFloat(s.temaStorage.parcela0)/100)+parseFloat(d.cliente.freteValor.valor);d.listaPagamentos=[{index:90,parcelas:0,boleto:!0,aVista:!0,descricao:"Boleto | R$ "+m.toFixed(2).replace(".",","),total:m}];for(var g=s.temaStorage.max_parcelas,f=1;f<=g;f++){var v=d.totalCarrinho+d.totalCarrinho*(parseFloat(s.temaStorage["parcela"+f])/100)+parseFloat(d.cliente.freteValor.valor),h={index:f+1,parcelas:f,boleto:!1,aVista:!1,descricao:"Cartão de crédito | "+f+"x de R$ "+(v/f).toFixed(2).replace(".",","),total:v};0==s.temaStorage["parcela"+f]&&(h.descricao+=" s/ juros"),d.listaPagamentos.push(h)}!function(o){var e={cep:o,peso:d.listaCompras.reduce(function(o,e){return o+parseFloat(e.peso)},0),total:u()};p(e)}(d.cliente.cep)}o.module("appToten").controller("pagamentoMpController",e),e.$inject=["$scope","$rootScope","apiService","$state","$timeout","mercadoPago","cfpLoadingBar"]}(angular),function(o){"use strict";function e(o,e,t){var a=o;a.categorias=[],t.get("categorias").then(function(o){t.setStorage("categorias",o.result),a.categorias=o.result})}o.module("appToten").controller("categoriaController",e),e.$inject=["$scope","$rootScope","apiService"]}(angular);
//# sourceMappingURL=../map/views/viewsModule.min.js.map
